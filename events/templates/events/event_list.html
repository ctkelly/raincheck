{% extends "home/base.html" %}
{% block content %}

<p>Hi, {{ user.username }}!</p>


<h4>My Events</h4>
<p>
{% if event_list %}
<ul>
  {% for event in event_list %}
      <p> <!-- For readability -- take out later -->
        <li>
            <br>
            Event id: {{ event.id }}
            <br>
            {{ event.title }} | Attendees: {{ event.invitee }}, {{ event.owner }}
            <br>
            Date: {{ event.date }} | Time: {{ event.time }} | Event Status: {{ event.display_status }}
            <p>
            {% for invitation in event.invitation_set.all %}
                {% if invitation.invitee == request.user %}
                    My Status: {{ invitation.invitation_status }}
                        {% if invitation.response == True %}
                          (<a href="{% url 'events:invitation_update' invitation.id %}">Request raincheck)</a>
                        {%  endif %}
                {% endif %}
            {% endfor %}
            </p>
                {% if event.owner == user %}
                    (<a href="{% url 'events:event_update' event.id %}">Edit event</a> |
                     <a href="{% url 'events:event_delete' event.id %}">Delete event</a>)
                {% endif %}
        </li>
      </p>
  {% endfor %}
</ul>
{% else %}
  <p>You currently have no events.</p>
{% endif %}
</p>
<p>
<a href="{% url 'events:event_create' %}">Add an event</a>
{% if user.is_authenticated %}
    <p><a href="{% url 'logout' %}?next={% url 'home:home' %}">Logout</a></p>
{% else %}
    <p><a href="{% url 'login' %}?next={% url 'home:home' %}">Login</a></p>
{% endif %}
</p>
{% endblock %}
